import{$ as k,C,G as b,K as v,L as M,M as S,R as P,W as E,X as T,Y as F,Z as x,_ as W,b as y,ba as D,ca as j,ea as O,f as s,fa as U,g as m,h as I,j as l,k as o,l as n,n as L,p as d,r as _,s as u,t as h,u as f}from"./chunk-JXJ27R3R.js";import"./chunk-QSTOU7CW.js";import"./chunk-QUJFQN2Y.js";import"./chunk-QNDG2AIA.js";import"./chunk-LEAR6PG4.js";import"./chunk-3DLEGXFE.js";import"./chunk-BZEB2UY2.js";import"./chunk-PZOBMGCJ.js";import"./chunk-YEZZ6QDO.js";import"./chunk-QIXCRKT2.js";import"./chunk-QNCTVU3D.js";import"./chunk-GJIUCB5T.js";import"./chunk-PZ5P6VYW.js";import"./chunk-QRBIBPJF.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-BLXM4U4C.js";import"./chunk-CKP3SGE2.js";import"./chunk-FJ7OIONH.js";import"./chunk-U2DYKTP5.js";import"./chunk-2URBEDWI.js";import"./chunk-TJNWXUBL.js";import"./chunk-BUMCRR6Y.js";import"./chunk-DNTR6X5U.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-REYR55MP.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as w,h as c}from"./chunk-B7O3QC5Z.js";var K=(()=>{let r=class r{constructor(e,i,t,p){this.http=e,this.router=i,this.toastController=t,this.authService=p,this.email="",this.password="",this.isLoading=!1}ngOnInit(){}login(){return c(this,null,function*(){if(!this.email||!this.password){this.showToast("Por favor completa todos los campos");return}this.isLoading=!0;try{let e=yield y(this.http.post(`${U.apiUrl}/auth/login`,{email:this.email,password:this.password}));console.log("Login response:",e);let i={user:w({id:e.data?.id||e.id,name:e.data?.name||e.name,email:e.data?.email||e.email},e.data||e),message:e.message||"Login successful"};console.log("\u{1F511} LoginPage: Datos completos del usuario creados:",i),yield this.authService.setUserData(i),console.log("\u{1F511} LoginPage: Usuario guardado exitosamente"),this.showToast("Login exitoso"),console.log("\u{1F511} LoginPage: Navegando a home..."),this.router.navigate(["/home"])}catch(e){console.error("Error en login:",e),this.showToast("Error en el login: "+(e.error?.message||"Error desconocido"))}finally{this.isLoading=!1}})}showToast(e){return c(this,null,function*(){yield(yield this.toastController.create({message:e,duration:3e3,position:"bottom"})).present()})}};r.\u0275fac=function(i){return new(i||r)(m(C),m(b),m(j),m(O))},r.\u0275cmp=I({type:r,selectors:[["app-login"]],decls:18,vars:8,consts:[[3,"translucent"],[3,"fullscreen"],[1,"container"],["position","stacked"],["type","email","placeholder","Ingresa tu email",3,"ngModelChange","ngModel","disabled"],["type","password","placeholder","Ingresa tu contrase\xF1a",3,"ngModelChange","ngModel","disabled"],["expand","block",2,"margin-top","20px",3,"click","disabled"]],template:function(i,t){i&1&&(o(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3,"Login"),n()()(),o(4,"ion-content",1)(5,"div",2)(6,"h2"),d(7,"Iniciar Sesi\xF3n"),n(),o(8,"ion-item")(9,"ion-label",3),d(10,"Email"),n(),o(11,"ion-input",4),f("ngModelChange",function(a){return h(t.email,a)||(t.email=a),a}),n()(),o(12,"ion-item")(13,"ion-label",3),d(14,"Contrase\xF1a"),n(),o(15,"ion-input",5),f("ngModelChange",function(a){return h(t.password,a)||(t.password=a),a}),n()(),o(16,"ion-button",6),L("click",function(){return t.login()}),d(17),n()()()),i&2&&(l("translucent",!0),s(4),l("fullscreen",!0),s(7),u("ngModel",t.email),l("disabled",t.isLoading),s(4),u("ngModel",t.password),l("disabled",t.isLoading),s(),l("disabled",t.isLoading),s(),_(" ",t.isLoading?"Iniciando sesi\xF3n...":"Iniciar Sesi\xF3n"," "))},dependencies:[D,T,k,W,E,P,F,x,S,v,M],styles:[".container[_ngcontent-%COMP%]{padding:20px;max-width:400px;margin:0 auto}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}ion-item[_ngcontent-%COMP%]{margin-bottom:15px}"]});let g=r;return g})();export{K as LoginPage};
